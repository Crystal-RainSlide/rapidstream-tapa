name: lint

on:
  - push
  - pull_request

jobs:
  check-format:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout myself
        uses: actions/checkout@v3
      - name: Install dependencies
        run: |
          curl --location --output /tmp/clang-format \
            https://github.com/muttleyxd/clang-tools-static-binaries/releases/download/master-208096c1/clang-format-14_linux-amd64
          sudo install /tmp/clang-format /usr/local/bin/clang-format
          rm /tmp/clang-format
          clang-format --version

          python3 -m pip install \
            isort==5.10.1 \
            yapf==0.32.0 \

      - name: Check format
        run: |
          ./format.sh
          git diff --color --exit-code
